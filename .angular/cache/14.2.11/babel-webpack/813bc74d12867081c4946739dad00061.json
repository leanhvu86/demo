{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.animationFrames = void 0;\n\nvar Observable_1 = require(\"../../Observable\");\n\nvar performanceTimestampProvider_1 = require(\"../../scheduler/performanceTimestampProvider\");\n\nvar animationFrameProvider_1 = require(\"../../scheduler/animationFrameProvider\");\n\nfunction animationFrames(timestampProvider) {\n  return timestampProvider ? animationFramesFactory(timestampProvider) : DEFAULT_ANIMATION_FRAMES;\n}\n\nexports.animationFrames = animationFrames;\n\nfunction animationFramesFactory(timestampProvider) {\n  return new Observable_1.Observable(function (subscriber) {\n    var provider = timestampProvider || performanceTimestampProvider_1.performanceTimestampProvider;\n    var start = provider.now();\n    var id = 0;\n\n    var run = function () {\n      if (!subscriber.closed) {\n        id = animationFrameProvider_1.animationFrameProvider.requestAnimationFrame(function (timestamp) {\n          id = 0;\n          var now = provider.now();\n          subscriber.next({\n            timestamp: timestampProvider ? now : timestamp,\n            elapsed: now - start\n          });\n          run();\n        });\n      }\n    };\n\n    run();\n    return function () {\n      if (id) {\n        animationFrameProvider_1.animationFrameProvider.cancelAnimationFrame(id);\n      }\n    };\n  });\n}\n\nvar DEFAULT_ANIMATION_FRAMES = animationFramesFactory(); //# sourceMappingURL=animationFrames.js.map","map":null,"metadata":{},"sourceType":"script"}